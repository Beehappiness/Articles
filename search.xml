<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[MySQL并列排名——保留名次空缺]]></title>
    <url>%2F2019%2F09%2F08%2FMySQL%E5%B9%B6%E5%88%97%E6%8E%92%E5%90%8D%E2%80%94%E2%80%94%E4%BF%9D%E7%95%99%E5%90%8D%E6%AC%A1%E7%A9%BA%E7%BC%BA%2F</url>
    <content type="text"><![CDATA[最近在研究排名问题，有点头疼。 首先， 有并列排名的情况下，保留名次空缺，意味着 90,80,80,70 80并列第二，70为第四名。 有并列排名的情况下，不保留名次空缺，意味着90,80,80,70 80并列第二，70为第三名。 下面是实例的详细逻辑拆解 数据源： 要求结果集：根据不同学生同一课程的成绩排名情况（要求不同学生同个课程的分数关系） 步骤一：根据同一课程(left join score b on a.subject_no=b.subject_no )生成自联结表，选取a表a.st_no, a.subject_no, a.score as sa 和 b表b.score as sb 12select a.st_no,a.subject_no,a.score as sa ,b.score as sbfrom score a left join score b on a.subject_no=b.subject_no 得到如下结果： st_no subject_no sa sb st1 1 72 72 st3 1 87 72 st4 1 98 72 st2 1 87 72 st1 1 72 87 st3 1 87 87 st4 1 98 87 st2 1 87 87 st1 1 72 98 st3 1 87 98 st4 1 98 98 st2 1 87 98 st1 1 72 87 st3 1 87 87 st4 1 98 87 st2 1 87 87 st1 2 89 89 st4 2 94 89 st1 2 89 94 st4 2 94 94 st1 3 78 78 st3 3 89 78 st1 3 78 89 st3 3 89 89 步骤二：筛选a表中的score 小于 b表中的score的行 123select a.st_no,a.subject_no,a.score as sa ,b.score as sbfrom score a left join score b on a.subject_no=b.subject_noand a.score &lt; b.score 得到如下结果： 步骤三：根据a表课程，学生，分数分组，计算sb列所对应的行数（即每门课的每位学生a表分数比b表分数低的有几行） 1234select a.st_no,a.subject_no,a.score as sa, count(b.score)from score a left join score b on a.subject_no=b.subject_noand a.score &lt; b.scoregroup by a.st_no,a.subject_no,a.score order by a.subject_no,a.score desc; 得到如下结果： 步骤四：上面所得行数+1，即可作为排名。 1234select a.st_no,a.subject_no,a.score,count(b.score)+1 as rfrom score a left join score b on a.subject_no=b.subject_noand a.score &lt; b.scoregroup by a.st_no,a.subject_no,a.score order by a.subject_no,a.score desc; 最终目标结果： 上一篇介绍的用row_number做排名处理，暂时没有想到如何处理并列名次的问题，或者可能其无法处理并列名次。 代码如下： 123select st_no,subject_no,score,row_number()over(partition by subject_no order by score desc) as rfrom score group by st_no,subject_no,scoreorder by subject_no,score desc; 结果如下图： row_number()over()语法： over()中的partition by 表示按什么分组标注行数，如果有多个分组要求用“,”连接（不是and），order by 表示按什么排序，默认升序。 注意：row_number()over()的设置的分组和排序在group by 之后执行。 缺陷就是有并列时，仍顺序标注行数。 BTW，如果步骤一是根据同一学生(left join score b on a.st_no=b.st_no )生成自联结表，选取a表a.st_no, a.subject_no, a.score as sa 和 b表b.score as sb 后面步骤同理，则会得到：根据同一学生不同课程的成绩排名情况（要求同个学生不同课程的分数关系） 1234select a.st_no,a.subject_no,a.score,count(b.score)+1 as rfrom score a left join score b on a.st_no=b.st_noand a.score &lt; b.scoregroup by a.st_no,a.subject_no,a.score order by a.subject_no,a.score desc; 结果如图： 这个扩展可能适用于其他情况，但在此案例下是错误的。]]></content>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL8.0 Server Stop No Connnection怎么办？]]></title>
    <url>%2F2019%2F08%2F28%2FMySQL8-0-Server-Stop-No-Connnection%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F%2F</url>
    <content type="text"><![CDATA[最近因为导入csv导致MySQL挂了。。。 打开workbench之后显示no connection 错误，Server status是STOP，想哭o(╥﹏╥)o 如果你也遇到了这种情况，请参考下面的解决办法，我的系统win10，mysql版本8.0： 首先查看“我的电脑-右键-管理-服务-MySQL”是否可以直接启动 通常会报错，无法启动（如果这么简单就能解决就好了┓( ´∀` )┏），那么继续按照下面的操作。 以管理员身份进入cmd命令 输入cd %ProgramFiles% 进入programfiles路径，然后cd MySQL，然后一直输到bin目录。（因为我的安装路径是在这个文件夹里，如果你的不是，请进到bin所在的目录） 在bin目录下输入mysqld –remove mysql80（如果无法执行，试试mysqld –remove mysql） 等待执行完成，打开安装目录下看有没有data文件夹。下图是data可能存放的路径，两个都看下。把data文件夹整个复制备份到其他地方，然后删除。 删除后回到cmd执行下面的命令：mysqld –initialize-insecure–user=mysql 执行后，输入mysqld –install mysql 看下刚才的两个路径里是否自动新增了data文件夹，如果都没有就将备份的data复制到原来的路径里。 然后回到cmd执行命令：net start mysql （有时候net start mysql会失败，请根据自身情况自行百度解决。也有时候失败后等几分钟在执行，就发现已经启动了。） 如果成功启动，打开workbench就可以继续耍啦O(∩_∩)O~~]]></content>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL初探——列值转换成行值]]></title>
    <url>%2F2019%2F08%2F26%2FMySQL%E5%88%9D%E6%8E%A2%E2%80%94%E2%80%94%E5%88%97%E5%80%BC%E8%BD%AC%E6%8D%A2%E6%88%90%E8%A1%8C%E5%80%BC%2F</url>
    <content type="text"><![CDATA[当MySQL某个表中需要将列值按照某些条件转换成多个新列并将其值对应到以条件命名的各个新列中时，应该怎么处理呢？ 例如下表是原始数据，需要按行显示各部门各月份的业绩 Table 1 Month Department Yeji 一月份 01 10 一月份 02 10 一月份 03 5 三月份 03 8 二月份 02 8 二月份 04 9 Table 2： Department Dep_Name 01 国内业务一部 02 国内业务二部 03 国内业务三部 04 国际业务部 所需结果集： Dep_Name 一月份 二月份 三月份 国内业务一部 国内业务二部 国内业务三部 国际业务部 解决方案： case when 语句 1234567select distinct table2.Dep_Name,max(case Month when &apos;一月份&apos; then Yeji else null end) as &apos;一月份&apos;,max(case Month when &apos;二月份&apos; then Yeji else null end) as &apos;二月份&apos;,max(case Month when &apos;三月份&apos; then Yeji else null end) as &apos;三月份&apos;from table1, table2where table1.Dep_Name=table2.Dep_Namegroup by Dep_Name; 思路：case when 根据某列中不同值进行过滤，然后输出另一列的对应值，并以行形式进行以上相同操作。最后，关联两个表，并按部门分组。 必须将max()函数和case when组合使用 当执行select dep, (case when mon = ‘三月份’ then yj else null end) as ‘三月份’ from table1; 时可以看到case when将一月份的03部门绩效改写为了NULL，则后面group by Dep_Name时,NULL值会覆盖实际03部门产生的业绩“8”。 将条件改为二月份时也是如此。在没有max()函数执行语句时，则会返回如下错误结果： 这里的case when 语法是： case [col_name] when [value1] then [result1] when [value2] then [result2] else [default] end 作用：按照条件选值 case when 的第二种用法： case when 列名 = 条件值1 then 选择项1 when 列名 = 条件值2 then 选择项2 else 默认值 end 作用：搜索相关条件然后输出值 可以将上例写成第二种用法的形式，得出同样结果。 下面的例子，只适用于第二种用法： 根据特定条件改写值并输出 原始数据表： Score 语文 数学 英语 70 80 58 所需结果集：大于等于80则成绩“优秀”，60-80之间则成绩“及格”，低于60则为“不及格” 语文 数学 英语 及格 优秀 不及格 12345select(case when 语文 &gt;=80 then &apos;优秀&apos; when 语文 &gt;=60 then &apos;及格&apos; else &apos;不及格&apos; end) 语文,(case when 数学 &gt;=80 then &apos;优秀&apos; when 数学 &gt;=60 then &apos;及格&apos; else &apos;不及格&apos; end) 数学,(case when 英语 &gt;=80 then &apos;优秀&apos; when 英语 &gt;=60 then &apos;及格&apos; else &apos;不及格&apos; end) 英语from course; 思路：case when 将某列根据范围筛选条件，然后改写值并输出。 下一篇将介绍Row_number() over()的用法，以统计总和，观察连续天数，或者显示排名。]]></content>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Github搭建个人博客步骤详解]]></title>
    <url>%2F2019%2F08%2F22%2FGithub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%AD%A5%E9%AA%A4%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[#Github搭建个人博客步骤详解 Step 1: Github page 登录github后新建一个仓库： 填写必要信息： 进入setting: 然后往下拉，找到github pages，点击choose a theme选择主题： Step 2: Hexo 搭建博客 在安装hexo前需要安装git和node.js下载链接见：https://hexo.io/zh-cn/docs/ 完成如上两个安装步骤后在一个空文件夹单击右键，选择git bash here 在命令行中输入 npm install hexo -g 回车，来安装hexo。等待跳出新的绿色行后 输入hexo -v 检查是否安装成功。如下图即为安装成功 然后输入hexo init 初始化文件夹，完成后显示Start blogging with Hexo这串提示就说明安装成功啦 输入npm install 安装所需要的组件 Step3: 搭桥到github, 将Hexo于Github page 联系起来 分别执行： git config –global user.name “你的GitHub用户名” git config –global user.email “你的GitHub注册邮箱” 然后生成SSH秘钥,执行： ssh-keygen -t rsa -C “你的GitHub注册邮箱” 连续三个回车，生成密钥，最后得到了两个文件：id_rsa和id_rsa.pub（默认存储路径是：C:\Users\Administrator.ssh） 在c盘中找到秘钥所在文件夹，用记事本打开id_rsa文件，并复制全部内容 打开github网站，在头像下侧选择setting 选择SSH and GPG keys 并点击 new SSH key，并将刚才复制的文本粘贴后保存 在命令行中输入ssh -T git@github.com，测试添加ssh是否成功。如果看到Hi后面是你的用户名，就说明成功了 Step4：HEXO部署 用coding编辑器打开 _config.yml文件 拉到最下面 按照如下图格式编辑后保存。特别注意冒号后必须有半角空格 deploy: type: git repo: git@github.com:自己的用户名/自己的用户名.github.io.git branch: master 回到git bash命令行，分别执行如下 hexo clean hexo generate hexo server 每回修改页面后都要进行部署Hexo这三步 然后输入npm install –save hexo-deployer-git 安装插件 之后输入hexo d -g 完成部署，看到红色的就表示成功完成部署！ 网页中输入http://yourgithubname.github.io 就能看到你的博客啦！！！ 大功告成！！]]></content>
  </entry>
</search>
